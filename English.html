<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>English Word Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
      background: #f0f4f8;
      color: #333;
      justify-content: space-between;
      text-align: center;
      padding: env(safe-area-inset-top) 20px 20px 20px;
    }

    header {
      background: #2563eb;
      color: white;
      padding: 15px 0;
      font-size: 1.5em;
      font-weight: bold;
      border-bottom-left-radius: 12px;
      border-bottom-right-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 10px;
    }

    #meaning {
      font-size: clamp(18px, 3vw, 24px);
      margin-bottom: 10px;
    }

    #inputDisplay {
      font-size: clamp(18px, 3vw, 26px);
      margin-bottom: 10px;
      min-height: 2em;
      letter-spacing: 0.1em;
    }

    .keyboard-row {
      display: flex;
      justify-content: center;
      margin: 5px 0;
      gap: 5px;
      flex-wrap: wrap;
    }

    .keyboard-row button {
      font-size: clamp(16px, 3vw, 22px);
      padding: clamp(10px, 1.5vw, 16px);
      min-width: clamp(35px, 8vw, 60px);
      max-width: clamp(50px, 12vw, 70px);
      min-height: clamp(45px, 7vw, 60px);
      border-radius: 6px;
      border: none;
      background: #10b981;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
      touch-action: manipulation;
      flex: 1 1 auto;
    }

    .keyboard-row button.special {
      min-width: clamp(60px, 20vw, 120px);
      max-width: clamp(100px, 25vw, 150px);
    }

    .keyboard-row button:active {
      transform: translateY(2px);
      background: #0d8a67;
    }

    #submitBtn, #hintBtn {
      font-size: clamp(16px, 3vw, 22px);
      padding: clamp(10px, 2vw, 16px) clamp(20px, 5vw, 25px);
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
      margin: 5px;
    }

    #submitBtn { background: #2563eb; color: white; }
    #submitBtn:active { background: #1e4fc4; }
    #submitBtn:disabled { background: #cbd5e1; cursor: not-allowed; } /* 無効時にグレー表示 */
    
    #hintBtn { background: #f59e0b; color: white; }
    #hintBtn:active { background: #b45309; }

    #result {
      font-size: clamp(16px, 3vw, 22px);
      min-height: 1.5em;
      font-weight: bold;
    }

    #score, #round {
      font-size: clamp(14px, 2.5vw, 18px);
      color: #555;
    }

    #tabs {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 3px;
      margin-bottom: 5px;
    }

    #tabs button {
      padding: 5px 8px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      background: #3b82f6;
      color: white;
      transition: 0.2s;
    }

    #tabs button:active { background: #1d4ed8; }

    footer {
      font-size: clamp(12px, 2vw, 16px);
      color: #777;
      padding: 10px 0;
    }
  </style>
</head>
<body>
  <header>English Word Quiz</header>

  <main>
    <div id="tabs"></div>
    <p id="meaning">Meaning</p>
    <div id="inputDisplay"></div>

    <div id="keyboard"></div>
    <div>
      <button id="submitBtn" onclick="checkAnswer()" disabled>Submit</button>
      <button id="hintBtn" onclick="showHint()">Hint</button>
    </div>

    <div id="result"></div>
    <div id="score">Score: 0 / 0</div>
    <div id="round">Round: 1</div>
  </main>

  <footer>© Veiled</footer>

  <script>
    const dictionary = {

//——————————————————————————————————————————————————————————
// A area
//——————————————————————————————————————————————————————————
  "〜の上に": "above",
  "海外へ": "abroad",
  "欠席して": "absent",
  "事故、偶然": "accident",
  "〜を横切って": "across",
  "演じる、行動する": "act",
  "活動的な": "active",
  "大人": "adult",
  "怖がって": "afraid",
  "再び、また": "again",
  "〜に反対して、〜に対して": "against",
  "〜前に": "ago",
  "空気、雰囲気": "air",
  "空港": "airport",
  "警報を出す": "alarm",
  "生きている": "alive",
  "まったく、すべて(の)": "all",
  "一人で": "alone",
  "〜に沿って": "along",
  "声を出して": "aloud",
  "すでに": "already",
  "〜もまた、さらに": "also",
  "怒っている": "angry",
  "別の、他の": "another",
  "(?)何か、(not)何も(〜ない)、(yes)何でも": "anything",
  "エプロン、前掛け": "apron",
  "面積、地域": "area",
  "〜の周りを、およそ": "around",
  "到着する": "arrive",
//——————————————————————————————————————————————————————————
// B area
//——————————————————————————————————————————————————————————
  "(パンなどを)焼く": "bake",
  "浴室、トイレ": "bathroom",
  "海辺、浜辺": "beach",
  "美しさ": "beauty",
  "なぜならば、〜だから": "because",
  "〜になる": "become",
  "以前に、〜の前に": "before",
  "始める、始まる": "begin",
  "信じる": "believe",
  "〜の下に、以下の": "below",
  "〜のそばに、〜の横に": "beside",
  "よりよい": "better",
  "(２つのもの)の間で": "between",
  "自転車": "bike",
  "ゆでる": "boil",
  "書店": "bookstore",
  "退屈な": "boring",
  "両方": "both",
  "壊す、壊れる、破壊、休憩": "break",
  "橋": "bridge",
  "光り輝く、明るい、利口な": "bright",
  "持ってくる、連れてくる": "bring",
  "建てる": "build",
  "忙しい": "busy",
  "〜によって、〜のそばに、〜にまでに": "by",
//——————————————————————————————————————————————————————————
// C area
//——————————————————————————————————————————————————————————
  "呼ぶ、電話をする": "call",
  "取り消す": "cancel",
  "首都、大文字(の)、主要な": "capital",
  "注意(する)、世話(をする)": "care",
  "注意深い": "careful",
  "城": "castle",
  "捕まえる": "catch",
  "携帯電話": "cell phone",
  "料理長、シェフ": "chef",
  "子ども": "child",
  "選ぶ": "choose",
  "サークル、円、取り巻く": "circle",
  "きれいな、きれいにする": "clean",
  "明らかに、はっきりと": "clearly",
  "利口な": "clever",
  "近い、親しい": "close",
  "集める": "collect",
  "大学": "college",
  "会社、仲間、交際": "company",
  "コンサート、演奏会": "concert",
  "接触(する、させる)": "contact",
  "コンテスト、競争(する)": "contest",
  "大陸": "continent",
  "続ける": "continue",
  "正しい、訂正する、直す": "correct",
  "canの過去形": "could",
  "国": "country",
  "コース、進路、講座": "course",
  "いとこ": "cousin",
  "カバー、表紙、〜をおおう": "cover",
  "横切る": "cross",
  "混雑した": "crowded",
  "泣き声、叫び、泣く、叫ぶ": "cry",
  "文化": "culture",
  "切る": "cut",
//——————————————————————————————————————————————————————————
// D area
//——————————————————————————————————————————————————————————
  "毎日の、日常の": "daily",
  "暗い": "dark",
  "日付、デート(をする)": "date",
  "娘": "daughter",
  "(手紙などで)親愛なる": "dear",
  "決める、決心する": "decide",
  "深い": "deep",
  "おいしい": "delicious",
  "砂漠": "desert",
  "デザイン、デザインする": "design",
  "食事": "dining",
  "汚れた、不潔な": "dirty",
  "医者、博士": "doctor",
  "ドル": "dollar",
  "(絵を)描く、(線を)引く": "draw",
  "衣服(を着る、着せる)": "dress",
  "〜の間(ずっと)": "during",
//——————————————————————————————————————————————————————————
// E area
//——————————————————————————————————————————————————————————
  "それぞれの": "each",
  "耳": "ear",
  "早くに、早い": "early",
  "地震": "earthquake",
  "簡単な": "easy",
  "食べる": "eat",
  "年配の": "elderly",
  "初歩の、基本の": "elementary",
  "Eメール(を送る)": "email",//実際はe-mailだけど、- が使えない。
  "〜を楽しむ": "enjoy",
  "十分な[に]": "enough",
  "入る": "enter",
  "〜でさえ": "even",
  "かつて、今までに": "ever",
  "試験": "exam",
  "例": "example",
  "興奮させる": "excite",
  "高価な": "expensive",
  "説明する": "explain",
//——————————————————————————————————————————————————————————
// F area
//——————————————————————————————————————————————————————————
  "事実、真実": "fact",
  "工場": "factory",
  "落ちる、落下、<米>秋": "fall",
  "有名な": "famous",
  "農場、農家": "farm",
  "お気に入りの(人、もの)": "favorite",
  "感じる": "feel",
  "少ない、ほとんどない": "few",
  "ついに、最後に": "finally",
  "見つける、分かる": "find",
  "晴れた、元気な、見事な": "fine",
  "終える": "finish",
  "最初(の、に)": "first",
  "床、(建物の)階": "floor",
  "飛ぶ、飛行機で行く": "fly",
  "ついて行く(来る)、従う": "follow",
  "食べ物、料理": "food",
  "忘れる": "forget",
  "フランス(語[人])の": "French",
  "親切な、親しい": "friendly",
  "いっぱいの、満腹の": "full",
  "楽しさ": "fun",
//——————————————————————————————————————————————————————————
// G area
//——————————————————————————————————————————————————————————
  "庭(いじりをする)": "garden",
  "ドイツ": "Germany",
  "与える": "give",
  "うれしい": "glad",
  "グラス、ガラス": "glass",
  "目標、ゴール、得点": "goal",
  "神": "god",
  "政府": "government",
  "祖父": "grandfather",
  "あいさつをする": "greet",
  "グループ、団体": "group",
  "育てる、育つ": "grow",
  "推測(する)": "guess",
  "体育館": "gym",
//——————————————————————————————————————————————————————————
// H area
//——————————————————————————————————————————————————————————
  "半分(の)": "half",
  "起こる": "happen",
  "固い、難しい、一生懸命": "hard",
  "頭痛": "headache",
  "重い、激しい": "heavy",
  "丘、小山": "hill",
  "趣味": "hobby",
  "持つ、保つ、握る": "hold",
  "ホームシックの": "homesick",
  "期待、望む": "hope",
  "病院": "hospital",
  "(１)時間": "hour",
  "おなかがすいた": "hungry",
  "急ぐ、急ぎ": "hurry",
  "傷つける、痛む、苦痛、傷ついた": "hurt",
//——————————————————————————————————————————————————————————
// I area
//——————————————————————————————————————————————————————————
  "もし〜ならば": "if",
  "重要な": "important",
  "インフォメーション、情報": "information",
  "おもしろい": "interesting",
  "インターネット": "Internet",
  "インタビュー(をする)": "interview",
  "招待する": "invite",
  "島": "island",
  "ジョギングをする": "jog",
  "加わる、参加する、つなぐ": "join",
  "審査員、裁判官、判断する": "judge",
  "年下(の)、後輩(の)": "junior",
  "公正な、ちょうど、ただ": "just",
//——————————————————————————————————————————————————————————
// K area
//——————————————————————————————————————————————————————————
  "保つ、続ける": "keep",
  "種類": "kind",
  "子猫": "kitten",
  "ノック(する)、たたく": "knock",
//——————————————————————————————————————————————————————————
// L area
//——————————————————————————————————————————————————————————
  "陸、土地、着陸[上陸]する": "land",
  "続く、最後の": "last",
  "遅い、遅く": "late",
  "あとで、後ほど": "later",
  "(声を出して)笑う": "laugh",
  "葉": "leaf",
  "学ぶ": "learn",
  "貸す": "lend",
  "より少ない": "less",
  "レッスン、(〜s)授業": "lesson",
  "させる": "let",
  "見る、見える": "look",
  "道に迷った": "lost",
  "(声が)大きい、大声で": "loud",
//——————————————————————————————————————————————————————————
// M area
//——————————————————————————————————————————————————————————
  "機械": "machine",
  "雑誌": "magazine",
  "主な、主要な": "main",
  "作る、する": "make",
  "たぶん、おそらく": "maybe",
  "意味する": "mean",
  "ミーティング、会議": "meeting",
  "思い出、記憶(力)": "memory",
  "メッセージ、伝言": "message",
  "分、ちょっとの間": "minute",
  "鏡": "mirror",
  "モデル、型、模型、手本": "model",
  "月": "moon",
  "大部分の、最も": "most",
  "山": "mountain",
  "映画": "movie",
  "博物館": "museum",
  "音楽家、演奏家": "musician",
  "〜しなければならない": "must",
  "私自身": "myself",
//——————————————————————————————————————————————————————————
// N area
//——————————————————————————————————————————————————————————
  "名(づける)": "name",
  "狭い、やっとの、狭める": "narrow",
  "ある土地で生まれた、固有の": "native",
  "必要とする": "need",
  "神経質な、心配して": "nervous",
  "けっして〜ない、一度も〜ない": "never",
  "新聞": "newspaper",
  "次の、次に": "next",
  "正午": "noon",
  "看護師": "nurse",
//——————————————————————————————————————————————————————————
// O area
//——————————————————————————————————————————————————————————
  "しばしば": "often",
  "オンラインで": "online",
  "順序、注文(する)、命令(する)": "order",
  "ほか(の)": "other",
  "海外へ[に]": "overseas",
//——————————————————————————————————————————————————————————
// P area
//——————————————————————————————————————————————————————————
  "ページ": "page",
  "絵の具、〜を絵の具で描く": "paint",
  "紙、(〜s)書類、新聞": "paper",
  "親": "parent",
  "一部、役": "part",
  "合格する、通る": "pass",
  "平和": "peace",
  "完璧な": "perfect",
  "人": "person",
  "選ぶ(こと)、つまみ取る": "pick",
  "場所、〜を置く": "place",
  "計画(する)、予定": "plan",
  "飛行機": "plane",
  "喜び": "pleasure",
  "要点、点、先端、指をさす": "point",
  "かわいい、とても、かなり": "pretty",
  "価格、値段": "price",
  "問題、困ったこと": "problem",
  "プロ(の)、職業の": "professional",
  "約束(する)、見込み(がある)": "promise",
  "置く": "put",
//——————————————————————————————————————————————————————————
// R area
//——————————————————————————————————————————————————————————
  "レース、競争、人種": "race",
  "雨(が降る)": "rain",
  "届く(範囲)、到着する、リーチ": "reach",
  "準備ができて": "ready",
  "現実の、本物の": "real",
  "記録、記録する": "record",
  "再利用する": "recycle",
  "レポート、報告、報告する": "report",
  "レストラン": "restaurant",
  "乗る": "ride",
  "右(の)、正しい": "right",
  "道、道路": "road",
//——————————————————————————————————————————————————————————
// S area
//——————————————————————————————————————————————————————————
  "悲しい": "sad",
  "安全な": "safe",
  "同じ": "same",
  "救う、節約する": "save",
  "言う、書いてある": "say",
  "科学、理科": "science",
  "地区、(会社などの)課": "section",
  "見る、会う": "see",
  "売る": "sell",
  "送る": "send",
  "光る、輝く": "shine",
  "衝撃、衝撃を与える": "shock",
  "〜すべきだ、〜したほうがよい": "should",
  "ショー、見せる、教える": "show",
  "閉める": "shut",
  "看板、署名する": "sign",
  "静かな": "silent",
  "〜以来": "since",
  "お客様(男性への呼びかけ)": "sir",
  "眠る": "sleep",
  "スライス、薄切りにする": "slice",
  "ゆっくり": "slowly",
  "におい(がする)": "smell",
  "太陽の": "solar",
  "いつの日か": "someday",
  "だれか": "someone",
  "残念に思って、申し訳ない": "sorry",
  "音、聞こえる": "sound",
  "南の": "southern",
  "話す": "speak",
  "費やす": "spend",
  "スタンプ、切手、(印)を押す": "stamp",
  "さらに、いまだに": "still",
  "店、蓄える": "store",
  "まっすぐな(に)、連続した": "straight",
  "通り": "street",
  "強い、丈夫な": "strong",
  "主題、話題、教科": "subject",
  "そのような": "such",
  "突然の": "sudden",
  "スーツ、似合う": "suit",
  "確かな、確実な": "sure",
  "甘い、快い": "sweet",
  "象徴、シンボル": "symbol",
  "システム、制度": "system",
//——————————————————————————————————————————————————————————
// T area
//——————————————————————————————————————————————————————————
  "取る、連れていく": "take",
  "味(がする)、好み": "taste",
  "伝える、教える": "tell",
  "〜よりも": "than",
  "もの、こと": "thing",
  "のどが渇いた": "thirsty",
  "千": "thousand",
  "投げる": "throw",
  "ネクタイ、結ぶ、縛る": "tie",
  "窮屈な、厳しい": "tight",
  "疲れた、飽きた": "tired",
  "いっしょに": "together",
  "今夜": "tonight",
  "道具": "tool",
  "ツアー、旅行": "tour",
  "勝ち抜き試合、トーナメント": "tournament",
  "旅行(する)": "travel",
  "トリック、わな、こつ、だます": "trick",
  "本当の、真実の": "true",
  "試みる、試み": "try",
  "２回": "twice",
  "型、タイプ、入力する": "type",
  "台風": "typhoon",
//——————————————————————————————————————————————————————————
// U area
//——————————————————————————————————————————————————————————
  "おじ": "uncle",
  "理解する": "understand",
  "(総合)大学": "university",
  "〜まで": "untill",
  "上の階へ": "upstairs",
  "使用する、使用": "use",
  "ふだんの、何気ない": "usual",
//——————————————————————————————————————————————————————————
// V area
//——————————————————————————————————————————————————————————
  "休み": "vacation",
  "野菜": "vegetable",
  "村": "village",
  "〜を訪問する、訪問": "visit",
  "声": "voice",
//——————————————————————————————————————————————————————————
// W area
//——————————————————————————————————————————————————————————
  "待つ": "wait",
  "戦争(状態)": "war",
  "暖かい、思いやりのある": "warm",
  "腕時計、(じっくりと)見る": "watch",
  "やり方、道、方法": "way",
  "弱い、力のない": "weak",
  "身につけている": "wear",
  "天気、天候": "weather",
  "ウェブサイト": "website",
  "婚礼、結婚式": "wedding",
  "週末(の)": "weekend",
  "歓迎(する)、ようこそ": "welcome",
  "うまく、健康な、ええと": "well",
  "ぬれた、湿った": "wet",
  "いつ、〜のとき": "when",
  "〜とともに": "with",
  "木、木材、(-s)森": "wood",
  "単語、ことば": "word",
  "仕事、労働、働く、うまくいく": "work",
  "書く": "write",
  "悪い、間違った": "wrong",
//——————————————————————————————————————————————————————————
// Y area
//——————————————————————————————————————————————————————————
  "もう、まだ(〜ない)": "yet",
//——————————————————————————————————————————————————————————
// Z area
//——————————————————————————————————————————————————————————
  "動物園": "zoo"
    };

    let words = Object.keys(dictionary);
    let wordOrder = [];
    let currentIndex = 0;
    let currentWord = "";
    let correctCount = 0;
    let totalCount = 0;
    let round = 1;
    let userInput = "";
    let wrongWords = [];
    let currentFilter = "ALL"; // ALL, A-Z, WRONG

    const keyboardLayout = ["qwertyuiop","asdfghjkl","zxcvbnm"];
    const submitBtn = document.getElementById("submitBtn");

    function shuffle(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]]}return array;}

    function createKeyboard(){
      const keyboardDiv=document.getElementById("keyboard");
      keyboardLayout.forEach(row=>{
        const rowDiv=document.createElement("div");rowDiv.className="keyboard-row";
        row.split("").forEach(key=>{
          const btn=document.createElement("button");btn.textContent=key;btn.onclick=()=>{
            userInput+=key;document.getElementById("inputDisplay").textContent=userInput;saveState();
          };rowDiv.appendChild(btn);
        });keyboardDiv.appendChild(rowDiv);
      });
      const specialRow=document.createElement("div");specialRow.className="keyboard-row";
      const spaceBtn=document.createElement("button");spaceBtn.textContent="␣";spaceBtn.className="special";
      spaceBtn.onclick=()=>{userInput+=" ";document.getElementById("inputDisplay").textContent=userInput;saveState();};
      specialRow.appendChild(spaceBtn);
      const backBtn=document.createElement("button");backBtn.textContent="⌫";backBtn.className="special";
      backBtn.onclick=()=>{userInput=userInput.slice(0,-1);document.getElementById("inputDisplay").textContent=userInput;saveState();};
      specialRow.appendChild(backBtn);
      keyboardDiv.appendChild(specialRow);
    }

    function startNewRound(){
      let sourceWords = [];
      if(currentFilter==="ALL") sourceWords=[...words];
      else if(currentFilter==="WRONG") sourceWords=[...wrongWords];
      else sourceWords = words.filter(w=>dictionary[w][0].toUpperCase()===currentFilter);

      if(sourceWords.length===0){
        currentWord="";
        document.getElementById("meaning").textContent="";
        document.getElementById("inputDisplay").textContent="";
        submitBtn.disabled = true;
        return;
      }

      wordOrder=shuffle(sourceWords);
      currentIndex=0;
      document.getElementById("round").textContent=`Round: ${round}`;
      nextWord();
      saveState();
    }

    function nextWord(){
      if(currentIndex>=wordOrder.length){
        currentWord="";
        document.getElementById("meaning").textContent="🎉 All questions finished!";
        document.getElementById("inputDisplay").textContent="";
        document.getElementById("result").textContent="";
        submitBtn.disabled = true;
        saveState();
        setTimeout(()=>{round++; startNewRound();},2000);
        return;
      }
      currentWord=wordOrder[currentIndex];currentIndex++;
      document.getElementById("meaning").textContent=currentWord;
      userInput="";document.getElementById("inputDisplay").textContent="";
      document.getElementById("result").textContent="";
      submitBtn.disabled = false;
      saveState();
    }

    function checkAnswer(){
      if(!currentWord) return; // 問題がない時は反応しない
      const resultDiv=document.getElementById("result");totalCount++;
      if(userInput.toLowerCase().trim()===dictionary[currentWord].toLowerCase()){
        resultDiv.textContent="✅ Correct!";resultDiv.style.color="green";correctCount++;
      }else{
        resultDiv.textContent=`❌ Wrong! Answer: ${dictionary[currentWord]}`;resultDiv.style.color="red";
        if(!wrongWords.includes(currentWord)) wrongWords.push(currentWord);
      }
      document.getElementById("score").textContent=`Score: ${correctCount} / ${totalCount}`;
      saveState();setTimeout(nextWord,1500);
    }

    function showHint(){
      if(currentWord){
        alert("Hint: "+dictionary[currentWord][0].toUpperCase());
      }
    }

    function createTabs(){
      const tabDiv=document.getElementById("tabs");tabDiv.innerHTML="";
      const allBtn=document.createElement("button");allBtn.textContent="ALL";allBtn.onclick=()=>{currentFilter="ALL"; startNewRound();};tabDiv.appendChild(allBtn);
      const wrongBtn=document.createElement("button");wrongBtn.textContent="WRONG";wrongBtn.onclick=()=>{currentFilter="WRONG"; startNewRound();};tabDiv.appendChild(wrongBtn);
      for(let i=65;i<=90;i++){
        const btn=document.createElement("button");
        btn.textContent=String.fromCharCode(i);
        btn.onclick=()=>{currentFilter=String.fromCharCode(i); startNewRound();};
        tabDiv.appendChild(btn);
      }
    }

    function saveState(){
      localStorage.setItem("quizState",JSON.stringify({
        wrongWords,wordOrder,currentIndex,currentWord,correctCount,totalCount,round,userInput,currentFilter
      }));
    }

    function loadState(){
      const saved=localStorage.getItem("quizState");
      if(saved){
        const state=JSON.parse(saved);
        wrongWords=state.wrongWords||[];
        wordOrder=state.wordOrder||[];
        currentIndex=state.currentIndex||0;
        currentWord=state.currentWord||"";
        correctCount=state.correctCount||0;
        totalCount=state.totalCount||0;
        round=state.round||1;
        userInput=state.userInput||"";
        currentFilter=state.currentFilter||"ALL";
        document.getElementById("score").textContent=`Score: ${correctCount} / ${totalCount}`;
        document.getElementById("round").textContent=`Round: ${round}`;
        document.getElementById("inputDisplay").textContent=userInput;
        if(currentWord) document.getElementById("meaning").textContent=currentWord;
        submitBtn.disabled = !currentWord;
      }
    }

    window.onload=()=>{
      createKeyboard(); createTabs(); loadState();
      if(!currentWord) startNewRound();
    }
  </script>
</body>
</html>